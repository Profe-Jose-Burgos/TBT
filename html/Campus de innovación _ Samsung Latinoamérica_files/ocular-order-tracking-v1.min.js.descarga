"use strict";const ORDER_TRACKER_DEBUG=!1;let TOKEN_AUTHORIZATION=null,OCULAR_SESSION_ID=null;class OcularOrderTrack{constructor(){this.start()}start(){this.setOrganizationElements()}setOrganizationElements(){this.elements=[{element:"form"}],this.insertSessionInput()}orderResponse(response){if(response)return console.log("Completed"),response}setSessionId(sessionId){OCULAR_SESSION_ID=sessionId}async setBuyOrder(obj,tokenAuthorization=null){let object=!1;if(null!==tokenAuthorization&&(TOKEN_AUTHORIZATION=tokenAuthorization),"object"==typeof obj&&Object.keys(obj).length?object=`json=${JSON.stringify([obj])}`:console.log("It must be an object and cannot be empty"),object&&OCULAR_SESSION_ID){const url=`product-management/v1/sessions/${OCULAR_SESSION_ID}/order`,method="POST",data=`${object}`;console.log("Processing request");const response=await this.ajaxRequest(method,url,data);return this.orderResponse(response)}return!1}async setBuyOrderState(obj,tokenAuthorization=null){let object=!1,objectItems=!1;if(null!==tokenAuthorization&&(TOKEN_AUTHORIZATION=tokenAuthorization),"object"==typeof obj&&Object.keys(obj).length?(object=Object.entries(obj),3===Object.keys(obj).length&&"items"===Object.keys(obj)[2]&&(objectItems={external_id:object[0][1],items:Object.values(obj)[2]},this.setBuyOrder(objectItems,tokenAuthorization))):console.log("It must be an object and cannot be empty"),object&&OCULAR_SESSION_ID){const url=`product-management/v1/sessions/${OCULAR_SESSION_ID}/order`,method="PUT",data=`${object[0][0]}=${object[0][1]}&${object[1][0]}=${object[1][1]}`;console.log("Processing request");const response=await this.ajaxRequest(method,url,data);return this.orderResponse(response)}return!1}handleError(error,handler){0}ajaxRequest(method,url,data){return new Promise((resolve,reject)=>{try{const xhr=new XMLHttpRequest;xhr.open(method,`${OCULAR_API_URL}/${url}`,!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),null!==TOKEN_AUTHORIZATION&&xhr.setRequestHeader("Authorization",TOKEN_AUTHORIZATION),xhr.onload=()=>{if(200===xhr.status){const res=JSON.parse(xhr.responseText);resolve(res)}else reject({status:xhr.status,statusText:xhr.statusText})},xhr.send(data)}catch(error){this.handleError(error,"ajaxRequest")}})}sessionInput(){const inputElement=document.createElement("input");return inputElement.setAttribute("name","ocular_session_id"),inputElement.setAttribute("type","hidden"),inputElement.value=OCULAR_SESSION_ID,inputElement}insertSessionInput(){if(!OCULAR_SESSION_ID)return!1;for(let organizationElementIndex=0;organizationElementIndex<this.elements.length;organizationElementIndex++){const element=this.elements[organizationElementIndex],items=document.querySelectorAll(element.element);for(let index=0;index<items.length;index++){const item=items[index];item.appendChild(this.sessionInput())}}}}const ocularOrderTrack=new OcularOrderTrack,orderStatusTest={external_id:"ORDER-8454",payment_status:1},orderStatusTest2={external_id:"ORDER-8454",payment_status:0,items:[{external_id:"SKU-845-G54",image:"https://domain.com/images/products/product/product_image.jpg",name:"nota",description:"Descripci贸n del producto",include_tax:!0,quantity:2,unit_price:!1,discount_type:"amount",discount:2990,currency:"CLP",price:1e4,variants:[{name:"Color",value:"Verde"},{name:"Talla",value:"Verde"}]},{external_id:"SKU-845-G54",image:"https://domain.com/images/products/product/product_image.jpg",name:"Nombre del producto2",description:"Descripci贸n del producto",include_tax:!0,quantity:1,unit_price:!1,discount_type:"amount",discount:55,currency:"CLP",price:100,variants:[{name:"Color",value:"Negro"},{name:"Talla",value:"XL"},{name:"Medidas",value:"30cm x 30cm"}]}]},orderTest={external_id:"ORDER-8454",items:[{external_id:"SKU-845-G54",image:"https://domain.com/images/products/product/product_image.jpg",name:"nota",description:"Descripci贸n del producto",include_tax:!0,quantity:2,unit_price:!1,discount_type:"amount",discount:2990,currency:"CLP",price:1e4,variants:[{name:"Color",value:"Verde"},{name:"Talla",value:"Verde"}]},{external_id:"SKU-845-G54",image:"https://domain.com/images/products/product/product_image.jpg",name:"Nombre del producto2",description:"Descripci贸n del producto",include_tax:!0,quantity:1,unit_price:!1,discount_type:"amount",discount:55,currency:"CLP",price:100,variants:[{name:"Color",value:"Negro"},{name:"Talla",value:"XL"},{name:"Medidas",value:"30cm x 30cm"}]}]};