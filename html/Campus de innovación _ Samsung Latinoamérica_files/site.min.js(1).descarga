(function(){var c=window.sg.common.$q,e=window.sg.common.utils,d=window.sg.common.video,g=window.sg.common.libs,h=window.sg.common.utils.setMobileFocusLoop,k=window.sg.common.utils.removeMobileFocusLoop,b=function(a){this.selector={section:".flagship-full-bleed",mediaBox:".flagship-full-bleed__media-wrap",videoEl:".video",videoBtn:".flagship-full-bleed__btn-wrap .js-video-play",videoBtnR:".flagship-full-bleed__play-btn",videoLayer:".flagship-full-bleed__video-layer",videoWrap:".flagship-full-bleed__video",
videoClose:".flagship-full-bleed__close",videoActive:"on"};this.ele={window:c(window),section:c(a)};this.activeVideo=null;this.handler={focusLock:this.focusLock.bind(this)};b.instances.set(a,this);this.init()};b.prototype.init=function(){this.setProperty();this.bindEvents()};b.prototype.reInit=function(){this.init()};b.prototype.setProperty=function(){this.videoBtn=this.ele.section.find(this.selector.videoBtn);this.videoLayer=this.ele.section.find(this.selector.videoLayer);this.videoWrap=this.videoLayer.find(this.selector.videoWrap);
this.videoClose=this.videoLayer.find(this.selector.videoClose);this.mediaBox=this.ele.section.find(this.selector.mediaBox)};b.prototype.setSubProperty=function(){this.videoMediaBtn=this.mediaBox.find(this.selector.videoBtnR);this.videoMediaWrap=this.mediaBox.find(this.selector.videoWrap);this.videoMediaClose=this.mediaBox.find(this.selector.videoClose);var a=this.videoMediaWrap.find(this.selector.videoEl).attr("data-video-embed");0<this.videoMediaBtn.target.length&&("true"===a?this.videoMediaBtn.attr("aria-hidden",
!0):this.videoMediaBtn.removeAttr("aria-hidden"))};b.prototype.activeEmbed=function(a){a=a.find(this.selector.videoEl).target[0];d.init(a)};b.prototype.deActiveEmbed=function(a){a=a.find(this.selector.videoEl).target[0];d.stop(a);d.dispose(a)};b.prototype.activeLayer=function(a){a=a.find(this.selector.videoEl).target[0];d.init(a);this.activeVideo=this.videoLayer};b.prototype.deActiveLayer=function(a){a=a.find(this.selector.videoEl).target[0];d.dispose(a)};b.prototype.focusLock=function(a){if(a.keyCode===
g.keyCode.TAB_KEY){var b=this.activeVideo.find(".video-player"),c=this.activeVideo.find(".flagship-full-bleed__close");!1===a.shiftKey&&c.target[0]===document.activeElement?(a.preventDefault(),b.focus()):!0===a.shiftKey&&b.target[0]===document.activeElement&&(a.preventDefault(),c.focus())}};b.prototype.bindEvents=function(){var a=this;this.videoBtn.target.forEach(function(b){c(b).off("click").on("click",function(){a.videoLayer.show();a.videoWrap.addClass(a.selector.videoActive);a.activeLayer(a.videoWrap);
0<a.videoMediaBtn.target.length&&(a.videoMediaBtn.css({display:"none"}),a.videoMediaBtn.attr("aria-hidden",!0),a.videoMediaBtn.attr("tabindex","-1"),a.videoMediaBtn.closest(".flagship-full-bleed__media-wrap").find("figure").attr("aria-hidden",!0));setTimeout(function(){a.videoWrap.find(".video-player").focus();a.ele.section.find(".flagship-full-bleed__btn-wrap .cta").attr("tabindex","-1");h(a.activeVideo.target[0]);e.hiddenScroll();a.ele.window.off("keydown",a.handler.focusLock).on("keydown",a.handler.focusLock)},
700)})});this.videoClose.target.forEach(function(b){c(b).off("click").on("click",function(){a.ele.section.find(".flagship-full-bleed__btn-wrap .cta").removeAttr("tabindex");k();a.videoBtn.focus();a.videoLayer.hide();a.videoWrap.removeClass(a.selector.videoActive);a.deActiveLayer(a.videoWrap);var b=a.videoMediaWrap.find(a.selector.videoEl).attr("data-video-embed");0<a.videoMediaBtn.target.length&&"true"!==b&&(a.videoMediaBtn.css({display:"block"}),a.videoMediaBtn.removeAttr("aria-hidden"),a.videoMediaBtn.removeAttr("tabindex"),
a.videoMediaBtn.closest(".flagship-full-bleed__media-wrap").find("figure").removeAttr("aria-hidden"));e.visibleScroll();a.ele.window.off("keydown",a.handler.focusLock)})});0!==this.mediaBox.target.length&&(this.setSubProperty(),this.videoMediaBtn.target.forEach(function(b){c(b).off("click").on("click",function(){a.activeEmbed(a.videoMediaWrap);a.videoMediaWrap.show();setTimeout(function(){a.videoMediaWrap.find(".video-player").focus();a.videoMediaBtn.css({display:"none"});a.videoMediaBtn.attr("aria-hidden",
!0);a.videoMediaBtn.attr("tabindex","-1");a.videoMediaBtn.closest(".flagship-full-bleed__media-wrap").find("figure").attr("aria-hidden",!0)},400)})}),this.videoMediaClose.target.forEach(function(b){c(b).off("click").on("click",function(){a.videoMediaBtn.css({display:"block"});a.videoMediaBtn.removeAttr("aria-hidden");a.videoMediaBtn.removeAttr("tabindex");a.videoMediaBtn.closest(".flagship-full-bleed__media-wrap").find("figure").removeAttr("aria-hidden");setTimeout(function(){a.videoMediaBtn.focus()},
500);a.videoMediaWrap.hide();a.deActiveEmbed(a.videoMediaWrap)})}))};var f=function(){c(".flagship-full-bleed").target.length&&c(".flagship-full-bleed").target.forEach(function(a){b.instances.has(a)||new b(a)})};b.instances=new WeakMap;c.ready(f);window.sg.components.flagshipFullBleed={init:f,reInit:function(){c(".flagship-full-bleed").target.forEach(function(a){b.instances.has(a)&&b.instances.get(a).reInit()})}}})();